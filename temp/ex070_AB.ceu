input void A, B;
var int v = 0;
par/and do
    await A;        // first trail
    v = v + 1;
    _printf("A");
with
    await B;        // second trail
    v = v * 2;
    _printf("B");
end
escape v;
